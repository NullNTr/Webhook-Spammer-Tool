<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Webhook Spammer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui,sans-serif;
  color:#fee2e2;
}
.container{
  width:94%;
  max-width:540px;
  padding:24px;
  background:linear-gradient(145deg,#1a0000,#000);
  border-radius:18px;
  border:1px solid #7f1d1d;
  box-shadow:0 0 40px rgba(239,68,68,.35);
}
h1{
  text-align:center;
  margin-bottom:18px;
  font-size:26px;
  background:linear-gradient(90deg,#fecaca,#ef4444,#7f1d1d);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
input,textarea{
  width:100%;
  box-sizing:border-box;
  margin-top:10px;
  padding:13px;
  border-radius:12px;
  background:#000;
  color:#fee2e2;
  border:1px solid #7f1d1d;
  outline:none;
  font-size:14px;
}
textarea{resize:none}
.tokens{height:120px}
.msg{height:130px}
.row{
  display:flex;
  gap:10px;
}
.row input{flex:1}
button{
  width:100%;
  margin-top:14px;
  padding:15px;
  font-size:16px;
  font-weight:bold;
  border-radius:14px;
  border:none;
  cursor:pointer;
  color:white;
}
.send{
  background:linear-gradient(135deg,#dc2626,#ef4444,#7f1d1d);
}
.stop{
  background:linear-gradient(135deg,#374151,#111827);
}
.status{
  margin-top:12px;
  text-align:center;
  font-size:13px;
  color:#fca5a5;
}
.log{
  margin-top:10px;
  font-size:12px;
  max-height:120px;
  overflow:auto;
  color:#fecaca;
}
</style>
</head>

<body>
<div class="container">
  <h1>Webhook Spammer</h1>

  <textarea id="urls" class="tokens"
    placeholder="トークンを改行で最大50個まで貼り付け可能"></textarea>

  <input id="serverId" placeholder="サーバーID">
  <input id="name" placeholder="Webhook名">

  <textarea id="msg" class="msg" maxlength="500"
    placeholder="送信メッセージ（最大500文字）"></textarea>

  <div class="row">
    <input id="interval" type="number" value="1000" min="500" placeholder="間隔(ms)">
    <input id="limit" type="number" placeholder="回数（空欄＝無限）">
  </div>

  <button class="send" onclick="start()">実行</button>
  <button class="stop" onclick="stop()">停止</button>

  <div class="status" id="status">待機中</div>
  <div class="status">送信数: <span id="count">0</span></div>
  <div class="log" id="log"></div>
</div>

<script>
let timers=[];
let running=false;
let count=0;

const urlsEl=document.getElementById("urls");
const serverEl=document.getElementById("serverId");
const msgEl=document.getElementById("msg");
const nameEl=document.getElementById("name");
const intervalEl=document.getElementById("interval");
const limitEl=document.getElementById("limit");
const statusEl=document.getElementById("status");
const countEl=document.getElementById("count");

function now(){
  const d=new Date();
  const y=d.getFullYear();
  const m=String(d.getMonth()+1).padStart(2,"0");
  const day=String(d.getDate()).padStart(2,"0");
  const h=String(d.getHours()).padStart(2,"0");
  const min=String(d.getMinutes()).padStart(2,"0");
  const s=String(d.getSeconds()).padStart(2,"0");
  return `[${y}/${m}/${day} ${h}:${min}:${s}]`;
}

function log(text){
  const l=document.getElementById("log");
  l.innerHTML += text + "<br>";
  l.scrollTop = l.scrollHeight;
}

function isValidServerId(id){
  return /^[0-9]{15,20}$/.test(id);
}

function start(){
  if(running) return;

  const urls = urlsEl.value.split("\n").map(v=>v.trim()).filter(Boolean);
  const serverId = serverEl.value.trim();
  const interval = parseInt(intervalEl.value)||1000;
  const limit = parseInt(limitEl.value)||Infinity;

  if(urls.length===0) return statusEl.textContent="トークンがありません";
  if(urls.length>50) return statusEl.textContent="トークンは最大50個まで";
  if(!serverId) return statusEl.textContent="サーバーIDを入力してください";
  if(!isValidServerId(serverId)) return statusEl.textContent="サーバーIDが不正です";
  if(!msgEl.value.trim()) return statusEl.textContent="メッセージが空です";

  running=true;
  count=0;
  countEl.textContent="0";
  statusEl.textContent="送信中… 停止で送信停止";

  log(`${now()} ▶ 開始 [ServerID: ${serverId}]`);

  urls.forEach(url=>{
    send(url);
    timers.push(setInterval(()=>{
      if(count>=limit){ stop(); return; }
      send(url);
    },interval));
  });
}

function send(url){
  const serverId = serverEl.value.trim();

  fetch(url,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      content: msgEl.value,
      username: nameEl.value || "Webhook Spammer"
    })
  }).then(()=>{
    count++;
    countEl.textContent=count;
    log(`${now()} ✔ 送信成功 [ServerID: ${serverId}]`);
  }).catch(()=>{
    log(`${now()} ✖ 送信失敗 [ServerID: ${serverId}]`);
  });
}

function stop(){
  timers.forEach(t=>clearInterval(t));
  timers=[];
  running=false;
  statusEl.textContent="停止しました";
  log(`${now()} ■ 停止`);
}
</script>
</body>
</html>
